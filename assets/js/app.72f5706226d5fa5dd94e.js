!function(e){function t(t){for(var n,i,l=t[0],d=t[1],s=t[2],u=0,h=[];u<l.length;u++)i=l[u],a[i]&&h.push(a[i][0]),a[i]=0;for(n in d)Object.prototype.hasOwnProperty.call(d,n)&&(e[n]=d[n]);for(c&&c(t);h.length;)h.shift()();return r.push.apply(r,s||[]),o()}function o(){for(var e,t=0;t<r.length;t++){for(var o=r[t],n=!0,l=1;l<o.length;l++){var d=o[l];0!==a[d]&&(n=!1)}n&&(r.splice(t--,1),e=i(i.s=o[0]))}return e}var n={},a={0:0},r=[];function i(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=n,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var l=window.webpackJsonp=window.webpackJsonp||[],d=l.push.bind(l);l.push=t,l=l.slice();for(var s=0;s<l.length;s++)t(l[s]);var c=d;r.push([0,1]),o()}([function(e,t,o){"use strict";o.r(t);o(1),o(2)},function(e,t){let o=document.querySelector("canvas"),n=o.getContext("2d");o.addEventListener("contextmenu",e=>e.preventDefault());let a=document.querySelector("#primary-color"),r=document.querySelector("#secondary-color"),i=a.value,l=r.value,d=4;a.addEventListener("change",()=>{i=a.value}),r.addEventListener("change",()=>{l=r.value});const s=(e,t)=>{let a=e,r=e,i=o.width/e;fetch(t).then(e=>e.json()).then(e=>{let o=function(e){return e};"assets/data/4x4.json"==t?o=function(e){return"#"+e}:"assets/data/32x32.json"==t&&(o=function(e){let[t,o,n,a]=e;return`rgba(${t}, ${o}, ${n}, ${a})`});for(var l=0;l<r;l++)for(var d=0;d<a;d++)n.fillStyle=o(e[d][l]),n.fillRect(d*i,l*i,i,i)})};let c=document.getElementById("set_32x32"),u=document.getElementById("set_4x4"),h=document.getElementById("set_png");u.addEventListener("click",()=>{s(4,"assets/data/4x4.json"),d=4}),c.addEventListener("click",()=>{s(32,"assets/data/32x32.json"),d=32}),h.addEventListener("click",()=>{let e=new Image(o.width,o.height);e.setAttribute("crossorigin","anonymous");let t,a,r=`https://api.unsplash.com/photos/random?query=${document.querySelector("#city").value}&client_id=f1271c713669400eacb7de93ecb742fd8dcb650a830e97dde3cd7365b63bdde3`;e.onload=()=>{let r,i;r>i?(r=Math.floor(512*a/a),i=Math.floor(512*t/a),n.drawImage(e,(o.height-i)/2,0,o.height-(o.width-i),0),n.fillStyle="#222222",n.fillRect(0,0,(o.width-r)/2,o.height),n.fillRect(o.height-(o.width-r)/2,0,(o.width-i)/2,o.width)):(r=Math.floor(512*a/t),i=Math.floor(512*t/t),n.drawImage(e,0,(o.width-r)/2,o.width,o.height-(o.width-r)/2),n.fillStyle="#222222",n.fillRect(0,0,o.width,(o.width-r)/2),n.fillRect(0,o.height-(o.width-r)/2,o.width,(o.width-r)/2))},fetch(r).then(e=>e.json()).then(o=>{t=o.width,a=o.height,e.src=o.urls.small})});let f;document.querySelector(".tools").addEventListener("click",e=>{let t=e.target.classList;for(let e=0;e<t.length;e++){if("tools__item"===t[e]){t.forEach(e=>{"tools__item"!==e&&(f=e)}),document.querySelectorAll(".tools__item").forEach(e=>e.classList.remove("active")),t.add("active");break}f=null}m()});const m=()=>{switch(E(),b(),I(),f){case"tools__pen":y();break;case"tools__paint-bucket":L();break;case"tools__take-color":S()}};let v=!1;const p=e=>{v=!0,w(e)},g=()=>{v=!1},w=e=>{if(!v)return;1===e.which?n.fillStyle=i:3===e.which&&(n.fillStyle=l);const t=o.width/d,a=Math.floor(e.offsetX*d/o.width)*t,r=Math.floor(e.offsetY*d/o.height)*t;n.fillRect(a,r,t,t)},y=()=>{o.addEventListener("mousedown",p),o.addEventListener("mouseup",g),o.addEventListener("mousemove",w)},E=()=>{o.removeEventListener("mousedown",p),o.removeEventListener("mouseup",g),o.removeEventListener("mousemove",w)},L=()=>{o.addEventListener("mouseup",_)},b=()=>{o.removeEventListener("mouseup",_)},_=e=>{let t,a,r,l=parseInt(i.slice(1,3),16),s=parseInt(i.slice(3,5),16),c=parseInt(i.slice(5,7),16),u=n.getImageData(0,0,o.width,o.height),h=o.width/d,f=Math.floor(e.offsetX*d/o.width)*h,m=Math.floor(e.offsetY*d/o.height)*h,v=[[f,m]],p=n.getImageData(f,m,1,1);if(t=p.data[0],a=p.data[1],r=p.data[2],l===t&&s===a&&c===r)return;let g=e=>{let o=u.data[e],n=u.data[e+1],i=u.data[e+2];return o==t&&n==a&&i==r},w=e=>{u.data[e]=l,u.data[e+1]=s,u.data[e+2]=c,u.data[e+3]=255};for(;v.length;){let e,t,n,a,r,i;for(t=(e=v.pop())[0],a=4*((n=e[1])*o.width+t);n-- >=0&&g(a);)a-=4*o.width;for(a+=4*o.width,++n,r=!1,i=!1;n++<o.height-1&&g(a);)w(a),t>0&&(g(a-4)?r||(v.push([t-1,n]),r=!0):r&&(r=!1)),t<o.width-1&&(g(a+4)?i||(v.push([t+1,n]),i=!0):i&&(i=!1)),a+=4*o.width}n.putImageData(u,0,0)},S=()=>{o.addEventListener("mouseup",k)},I=()=>{o.removeEventListener("mouseup",k)},k=e=>{let t=n.getImageData(e.offsetX,e.offsetX,1,1),o=t.data[0].toString(16).toUpperCase(),r=t.data[1].toString(16).toUpperCase(),i=t.data[2].toString(16).toUpperCase();o=1==o.length?o+o:o,r=1==r.length?r+r:r,i=1==i.length?i+i:i,a.value="#"+o+r+i};let j=window.localStorage;document.addEventListener("mouseup",()=>{j.setItem("Img",o.toDataURL())}),window.addEventListener("load",()=>{o.addEventListener("mousedown",p),o.addEventListener("mouseup",g),o.addEventListener("mousemove",w);let e=j.getItem("Img"),t=new Image;null!=e&&(t.src=e,t.addEventListener("load",()=>{n.drawImage(t,0,0,o.width,o.height)}))});let x=document.querySelector("#primary-color"),q=document.querySelector("#secondary-color");window.addEventListener("keydown",e=>{if("p"===e.key)M("tools__pen");else if("b"===e.key)M("tools__paint-bucket");else if("c"===e.key)x.click();else{if("s"!==e.key)return;q.click()}});const M=e=>{document.querySelectorAll(".tools__item").forEach(t=>{t.classList[1]===e?t.classList.add("active"):t.classList.remove("active")}),f=e,m()};document.querySelector("#set_grey").addEventListener("click",()=>{let e=n.getImageData(0,0,o.width,o.height);for(let t=0;t<e.data.length;t+=4){let o=.3*e.data[t]+.59*e.data[t+1]+.11*e.data[t+2];e.data[t]=o,e.data[t+1]=o,e.data[t+2]=o,e.data[t+3]=255}n.putImageData(e,0,0)});let O=document.querySelector("#Size");O.addEventListener("change",()=>{d=O.value})},function(e,t,o){var n=o(3);"string"==typeof n&&(n=[[e.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};o(4)(n,a);n.locals&&(e.exports=n.locals)},function(e,t,o){}]);